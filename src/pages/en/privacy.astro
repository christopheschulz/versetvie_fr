---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

const currentDate = new Date().toLocaleDateString('en-US', {
  day: 'numeric',
  month: 'long',
  year: 'numeric'
});
---

<Layout title="Privacy Policy - VersetVie">
  <Header />
  <main class="pt-24 pb-16 px-4">
    <div class="max-w-3xl mx-auto">
      <h1 class="text-3xl sm:text-4xl font-bold mb-4">
        <span class="bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent">
          Privacy Policy
        </span>
      </h1>

      <p class="text-sm text-[var(--color-text-tertiary)] italic mb-8">
        Last updated: {currentDate}
      </p>

      <div class="space-y-6">
        <p class="text-[var(--color-text-secondary)]">
          At VersetVie, we place great importance on protecting your personal data. This privacy policy explains how we collect, use, and protect your information in compliance with GDPR and other applicable regulations.
        </p>

        <!-- Section 1 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">1. Data collected</h2>
          <div class="space-y-4 text-[var(--color-text-secondary)]">
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Profile data (stored locally):</h3>
              <ul class="list-disc list-inside space-y-1 ml-2">
                <li>First name (optional, for personalization)</li>
                <li>Gender (to adapt content)</li>
                <li>Subscription mode (standard/premium)</li>
                <li>App preferences</li>
              </ul>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Anonymized usage data (via Mixpanel EU):</h3>
              <ul class="list-disc list-inside space-y-1 ml-2">
                <li>User gender (m/f)</li>
                <li>Subscription mode (premium/standard)</li>
                <li>Onboarding completion status</li>
                <li>Usage events (screens visited, buttons clicked)</li>
                <li>Content interactions (verses discovered)</li>
                <li>Technical information (platform, app version)</li>
              </ul>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Attribution data (via Tenjin, with iOS ATT consent):</h3>
              <ul class="list-disc list-inside space-y-1 ml-2">
                <li>IDFA (iOS with ATT consent)</li>
                <li>GAID (Android)</li>
                <li>Marketing campaign information (installation source)</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Section 2 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">2. What we do NOT collect</h2>
          <p class="text-[var(--color-text-secondary)] mb-3">We commit to NOT collecting:</p>
          <ul class="list-disc list-inside space-y-1 text-[var(--color-text-secondary)] ml-2">
            <li>Email addresses or phone numbers</li>
            <li>Precise geographic location</li>
            <li>Full text of viewed verses</li>
            <li>Biometric data or photos</li>
            <li>Web browsing history</li>
            <li>Contacts or information from other apps</li>
          </ul>
        </section>

        <!-- Section 3 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">3. Data usage</h2>
          <div class="space-y-4 text-[var(--color-text-secondary)]">
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Profile data:</h3>
              <ul class="list-disc list-inside space-y-1 ml-2">
                <li>Personalize your spiritual experience</li>
                <li>Adapt content to your gender</li>
                <li>Save your preferences</li>
              </ul>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Usage data (Mixpanel EU):</h3>
              <ul class="list-disc list-inside space-y-1 ml-2">
                <li>Analyze user engagement</li>
                <li>Improve interface and features</li>
                <li>Understand preferences by gender</li>
                <li>Optimize onboarding process</li>
                <li>Measure app performance</li>
              </ul>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Attribution data (Tenjin):</h3>
              <ul class="list-disc list-inside space-y-1 ml-2">
                <li>Measure marketing campaign effectiveness</li>
                <li>Attribute installations to correct sources</li>
                <li>Optimize advertising investments</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Section 4 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">4. Data sharing</h2>
          <div class="space-y-4 text-[var(--color-text-secondary)]">
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Mixpanel EU (analytics):</h3>
              <p>We use Mixpanel with EU servers to analyze app usage. Only anonymized data is shared (gender, subscription mode, usage events). No personally identifiable information is transmitted.</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Tenjin (marketing attribution):</h3>
              <p>We use Tenjin to measure marketing campaign effectiveness. On iOS, this requires your ATT (App Tracking Transparency) consent. You can refuse at any time.</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">RevenueCat (subscription management):</h3>
              <p>RevenueCat manages Premium subscriptions and communicates with Apple/Google to verify purchases. Only data necessary for subscription management is shared.</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Supabase (user feedback):</h3>
              <p>We use Supabase to collect your feedback on the app (suggestions, paywall reviews). Only your feedback text and an anonymous identifier are stored. No personal data is transmitted.</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">No other sharing:</h3>
              <p>We do not sell, trade, or rent your data to third parties for commercial purposes.</p>
            </div>
          </div>
        </section>

        <!-- Section 5 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">5. Storage and security</h2>
          <div class="space-y-4 text-[var(--color-text-secondary)]">
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Local storage:</h3>
              <p>Your profile data is stored only on your device via AsyncStorage (native encryption).</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Mixpanel EU data:</h3>
              <p>Anonymized usage data is stored on Mixpanel's secure servers in the European Union (GDPR compliant, SOC 2, encrypted in transit and at rest).</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Tenjin data:</h3>
              <p>Attribution data is stored on Tenjin servers according to their privacy policies.</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Supabase data:</h3>
              <p>Feedback is securely stored on Supabase servers (GDPR compliant, HTTPS encryption, secure authentication).</p>
            </div>
            <div>
              <h3 class="font-medium text-[var(--color-text)] mb-2">Retention:</h3>
              <ul class="list-disc list-inside space-y-1 ml-2">
                <li>Local data: kept until uninstallation</li>
                <li>Mixpanel data: 24 months maximum</li>
                <li>Tenjin data: per their retention policy</li>
                <li>Supabase data: kept for product improvement</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Section 6 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">6. Your rights (GDPR)</h2>
          <p class="text-[var(--color-text-secondary)] mb-3">You have the following rights:</p>
          <ul class="list-none space-y-2 text-[var(--color-text-secondary)]">
            <li><strong class="text-[var(--color-text)]">Right of access:</strong> Know what data is collected</li>
            <li><strong class="text-[var(--color-text)]">Right to rectification:</strong> Correct your data via settings</li>
            <li><strong class="text-[var(--color-text)]">Right to erasure:</strong> Uninstalling the app erases all your local data</li>
            <li><strong class="text-[var(--color-text)]">Right to object:</strong> Refuse ATT tracking (iOS) or reset advertising ID (Android)</li>
            <li><strong class="text-[var(--color-text)]">Right to portability:</strong> Export your favorites from the app</li>
          </ul>
          <p class="text-[var(--color-text-secondary)] mt-4">
            To exercise these rights or for any questions, you can contact us via the "Help & Support" screen.
          </p>
        </section>

        <!-- Section 7 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">7. Cookies and tracking</h2>
          <p class="text-[var(--color-text-secondary)]">
            This mobile app does not use web cookies. Mixpanel analytics tracking uses temporary anonymous identifiers that do not allow personal identification. Tenjin attribution uses IDFA (iOS) or GAID (Android) with your consent.
          </p>
        </section>

        <!-- Section 8 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">8. Modifications</h2>
          <p class="text-[var(--color-text-secondary)]">
            We reserve the right to modify this privacy policy. Important changes will be notified via the app. The current version is always accessible in settings.
          </p>
        </section>

        <!-- Section 9 -->
        <section class="p-6 rounded-2xl bg-[var(--color-card)] border border-[var(--color-border)]">
          <h2 class="text-xl font-semibold mb-4">9. Contact</h2>
          <p class="text-[var(--color-text-secondary)]">
            For any questions regarding this privacy policy or your personal data, contact us via the "Help & Support" screen of the app or by email at <a href="mailto:contact@versetvie.fr" class="text-[var(--color-primary)] hover:underline">contact@versetvie.fr</a>.
          </p>
        </section>
      </div>
    </div>
  </main>
  <Footer />
</Layout>
